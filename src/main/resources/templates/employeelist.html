<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Employee</title>
    <link href = "css/styles.css" rel = "stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>

<div th:insert="~{fragments/navbar.html :: navbar(${entreprise})}"></div>

<div class="container">
        <h1 class="display-6">
            Employee List
        </h1>
        <hr />
        <div class="container">
            <form th:action="@{/employees}" method="get">
                <input type="text" name="firstName" placeholder="First Name">
                <input type="text" name="lastName" placeholder="Last Name">
                <input type="text" name="function" placeholder="Function">
                <select name="sex">
                    <option value="" selected>Any</option>
                    <option value="M">Male</option>
                    <option value="F">Female</option>
                </select>
                <select name="orderBy">
                    <option value="firstName">First Name</option>
                    <option value="lastName">Last Name</option>
                </select>
                <select name="sortDirection">
                    <option value="asc">Ascending</option>
                    <option value="desc">Descending</option>
                </select>

                <button type="submit">Apply Filters</button>
            </form>
            <a th:href="@{/export(firstName=${firstName}, lastName=${lastName}, function=${function}, sex=${sex}, orderBy=${orderBy}, sortDirection=${sortDirection}}"
               class="btn btn-primary">Export to CSV</a>
        </div>
        <div class="scrollable">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr class="align-middle">
                        <th scope="col">Id</th>
                        <th scope="col">Lastname</th>
                        <th scope="col">Firstname</th>
                        <th scope="col">Birthdate</th>
                        <th scope="col">Sex</th>
                        <th scope="col">Matricule</th>
                        <th scope="col">CIN number</th>
                        <th scope="col">CIN issue date</th>
                        <th scope="col">CIN delivrance location</th>
                        <th scope="col">Address</th>
                        <th scope="col">Email Pro</th>
                        <th scope="col">Email Perso</th>
                        <th scope="col">SocioProfessional category</th>
                        <th scope="col">Children count</th>
                        <th scope="col">Function</th>
                        <th scope="col">Hiring Date</th>
                        <th scope="col">Departure Date</th>
                        <th scope="col">CNAPS Number</th>
                        <th scope="col">Phone Number</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="employee : ${employees}">
                        <th scope="row" th:text="${employee.id}" />
                        <td th:text="${employee.lastName}" />
                        <td th:text="${employee.firstName}" />
                        <td th:text="${employee.birthDate}" />
                        <td th:text="${employee.sex}" />
                        <td th:text="${employee.matricule}" />
                        <td th:text="${employee.CINNumber}" />
                        <td th:text="${employee.CINIssueDate}" />
                        <td th:text="${employee.CINDelivranceLocation}" />
                        <td th:text="${employee.address}" />
                        <td th:text="${employee.emailPro}" />
                        <td th:text="${employee.emailPerso}" />
                        <td th:text="${employee.socioProCategory}" />
                        <td th:text="${employee.children}" />
                        <td th:text="${employee.function}" />
                        <td th:text="${employee.hiringDate}" />
                        <td th:text="${employee.departureDate}" />
                        <td th:text="${employee.cnapsNumber}" />
                        <td th:text="${employee.phoneNumber}" />
                        <td>
                            <a th:href="@{/employee(employeeId=${employee.id})}" class="btn btn-success">Profile</a>
                        </td>
                        <td>
                            <a th:href="@{/employee-form/edit(employeeId=${employee.id})}" class="btn btn-success">Edit</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <hr />
        <a th:href="@{/employee-form}" class="btn btn-primary">Add new employee</a>
    </div>
</html>